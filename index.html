<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>天大地大台科大地宮</title>
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap-4.0.0.js"></script>
    <script src="js/class.js"></script>
    <script src="js/vue.js"></script>
    <link rel="stylesheet" href="css/bootstrap-4.0.0.css">
    <link rel="stylesheet" href="css/style.css">
    <script>
        let plist = new Finder();
        let hasStart = false;

        $(function() {
            plist.init();

            $("body").on('keydown', (e) => {
                if (e.originalEvent.code == "Space" && hasStart) {
                    plist.start_pause();
                }
            });
            //plist.initGame();
            $(".fontSet").click(function() {
                plist.fontsize += parseInt($(this).attr('data'));
            })
            $(".nameSet").on("keydown", function() {
                plist.username = "" + $(this).val();
            })
            $(".levelSet").click(function() {
                plist.level = $(this).attr('data');
            })
            $(".startGram").click(function() {
                plist.initGame();
                hasStart = true;

            })
            $(".stateSet").click(function() {
                plist.start_pause();
            })
            if(!("ontouchstart" in document)) {
                $(".side-control").hide();
            }
            $(".startTeach").click(function() {
                teach();
            })
            $(".exit_teach").click(function() {
                $("#teach").fadeOut();
                plist.teach = false;
                teach_now = 0;
            })
            $(".next_teach").click(function() {
                teach_next();
            })
        })
        let teach_plist = [
            "你可以設定遊戲難度 字體大小，玩家姓名",
            "碰到Trigger+10分，碰到星星+50分。如果碰到鬼您將返回起始點，並且扣除一個生命值(血量)，扣三次生命值則結束遊戲。得到的分數將是您的攻擊能力（戰績）",
            "注意：如果如果靠近鬼方圓兩格內，鬼將會自動追蹤您的位置，並且上方會出現告警",
            "上面為遊戲狀態欄位，有: 分數（攻擊能力、戰績），玩家姓名，難度，遊戲時間，血量(生命值)",
            "下方為控制方向用按鈕（僅於觸控模式中顯示），遊戲開始、暫停按鈕，字體大小調整"
        ];
        let teach_now = 0;
        function teach() {
            plist.teach = true;
            $("#teach").show();
            teach_next();
            $(".startGram").removeClass('btn-outline-warning');
            $(".startGram").addClass("btn-warning");

        }
        function teach_next() {
            if(teach_now <= teach_plist.length - 1){
                $("#teach_img").attr("src", "img/" + teach_now + ".png");
                $("#teach_description").text(teach_plist[teach_now]);
                teach_now++;
            }else {
                plist.initGame();
                teach_now = 0;
            }
        }

    </script>
</head>
<body>
    <div id="root">
        <div class="loading-layout" :class="{'loading-ani-show': loading}">
            <div class="loading-ani-container">
                <div class="loading-bar" v-for="index in 12" :style="{
                            '-webkit-animation-delay': ((index - 1) * (0.083)) + 's',
                            'animation-delay': ((index - 1) * (0.083)) + 's',
                            '-webkit-transform': `rotate(${30 * (index - 1)}deg)`,
                            '-ms-transform': `rotate(${30 * (index - 1)}deg)`,
                            'transform': `rotate(${30 * (index - 1)}deg)`,
                            'font-size': `32px!important`
                        }">
                </div>
            </div>
        </div>
        <div class="ipad container">
            <div class="alert alert-danger" id="nearPacman" role="alert" style="display: none;">
                Ghost已經追蹤到您，請您儘速離開。
                <strong id="ghost-side" style="font-weight: 900"></strong>
            </div>
            <div class="mask" id="teach" style="z-index: 99999999; display: none;">
                <div class="container row">
                    <div class="col-12">
                        <img src="" id="teach_img" class="w-100" style="border: 2px red solid;" alt="">
                    </div>
                    <div class="col-12">
                        <hr>
                        <p id="teach_description"></p>
                    </div>
                </div>
                <div class="container">
                    <div class="row">
                        <div class="col-6">
                            <input type="button" class="exit_teach btn w-100 btn-outline-warning" value="退出教學">
                        </div>
                        <div class="col-6">
                            <input type="button" class="next_teach btn w-100 btn-outline-warning" value="下一步">
                        </div>
                    </div>
                </div>
            </div>
            <div class="mask" id="home">
                <div class="container">
                    <div class="row">
                        <div class="col-12 mt-5">
                            <img src="img/logo.svg" class="w-100" alt="" style="padding: 30px;">
                        </div>
                        <div class="col-12 mt-30">
                            <div class="row">
                                <div class="col-2">
                                    玩家姓名:
                                </div>
                                <div class="col-10">
                                    <input type="text" class="m-0 border-0 w-100 nameSet player-name-field" value="B11015020">
                                </div>
                            </div>
                        </div>

                        <div style="height: 60px;"></div>
                        <div class="col-6 mt-5">
                            <h4>遊戲難度</h4>
                        </div>
                        <div class="col-6 mt-5">
                            <h4>遊戲模式</h4>
                        </div>
                        <div class="col-2">
                            <input type="button" class="levelSet btn w-100 btn-outline-warning" data="0" value="簡單">
                        </div>
                        <div class="col-2">
                            <input type="button" class="levelSet btn w-100 btn-outline-warning" data="1" value="正常">
                        </div>
                        <div class="col-2">
                            <input type="button" class="levelSet btn w-100 btn-outline-warning" data="2" value='困難'>
                        </div>
                        <div class="col-3">
                            <input type="button" class="startGram btn w-100 btn-outline-warning" value="開始遊戲">
                        </div>
                        <div class="col-3">
                            <button type="button" class="startTeach btn w-100 btn-outline-warning">
                                教學
                            </button>
                        </div>

                        <div class="col-6 mt-5">
                            <h4>字體大小</h4>
                        </div>
                        <div class="col-6">
                        </div>
                        <div class="col-3">
                            <input type="button" class="fontSet btn w-100 btn-outline-warning" data="3" value="A+">
                        </div>
                        <div class="col-3">
                            <input type="button" class="fontSet btn w-100 btn-outline-warning"  data="-3" value='A-'>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-4 p-15">
                        <img src="img/logo_original.svg" class="header-logo" alt="">
                        <img src="img/north.svg" alt="" style="height: 30px;">
                    </div>
                    <div class="col-4">
                        <div class="fcc">
                            <span class="badge badge-dark badge-pill mt-3 mr-2" id="level">
                                正常
                            </span>
                            <span class="mt-3" id="username" value="玩家姓名">
                                玩家姓名
                            </span>
                        </div>
                        <hr class="m-2">
                        <div class="d-flex">
                            <p class="w-50 m-1 fcc" id="score">0</p>
                            <p class="w-50 m-1 fcc" id="times">00:00</p>
                        </div>
                    </div>
                    <div class="col-4 fec">
                        <div id="lives" class="d-flex justify-content-around"></div>
                    </div>
                </div>
            </div>
            <div id="map">

            </div>
            <div class="container" style="position: absolute; bottom: 15px;">
                <div class="row">
                    <div class="col-2">
                        <input type="button" class="fontSet btn w-100 btn-outline-warning" data="3" value="A+">
                    </div>
                    <div class="col-2">
                        <input type="button" class="fontSet btn w-100 btn-outline-warning"  data="-3" value='A-'>
                    </div>
                    <div class="col-4">
                        <div class="btn-group w-100">
                            <input type="button" class="btn side-control btn-outline-warning" side="ArrowUp" value="上">
                            <input type="button" class="btn side-control btn-outline-warning" side="ArrowDown" value="下">
                            <input type="button" class="btn side-control btn-outline-warning" side="ArrowLeft" value="左">
                            <input type="button" class="btn side-control btn-outline-warning" side="ArrowRight" value="右">
                            <input type="button" class="btn side-control btn-outline-warning" side="" value="空白">
                        </div>
                    </div>
                    <div class="col-4 fec">
                        <input type="button" value="暫停" class="btn btn-outline-warning stateSet mr-2">
                        <input type="button" class="btn btn-outline-warning" value="重啟遊戲" onclick="location.reload()">
                    </div>
                </div>
            </div>

        </div>
        <div class="mask" id="score_board" style="display: none;">
            <div class="container mt60">

                <div id="score_main">

                </div>
                <div class="row mt60">
                    <div class="col-4"></div>
                    <div class="col-4">
                    </div>
                    <div class="col-4"></div>
                </div>
            </div>
        </div>
    </div>

    </div>
</body>
<script src="js/index.js"></script>

</html>